<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Test</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
  </head>
  <body class="bg-body-tertiary">
    <div class="container">
        <h1 class="text-center my-4">Catálogo Pokémon</h1>
        <div id="loading">Cargando...</div>
        <div class="row" id="pokemon-list"></div>
    </div>
    <script>
        async function obtenerListadoPokemon(url,name){
            const response = await fetch('https://pokeapi.co/api/v2/pokemon?limit=100000&offset=0');
            const data = await response.json();
            const listContainer = document.getElementById('pokemon-list');
            document.getElementById('loading').style.display='none'
            data.results.forEach(async pokemon =>{
              try {
                const res = await fetch(pokemon.url);
                const detalles = await res.json();
                const col = document.createElement('div');
                const types = detalles.types.map(t=>`<span class="badge text-bg-primary me-1">${t.type.name}</span>`).join('');
                const moves = detalles.moves.slice(0,4).map(m=>`<li class="ps-3 mt-1" id="sopaipilla">${m.move.name}</li>`).join('');
                col.className  = 'col-6 col-md-4 col-lg-3 mb-2';
                col.innerHTML =  `
                    <div class="card mb-3 mx-auto"  style="width: 18rem;" onclick="obtenerListadoPokemon('${pokemon.url}','${pokemon.name}')">
                      <img src="${detalles.sprites.front_default}" class="card-img w-50 mx-auto" alt="...">
                      <div class="card-body">
                        <h5 class="card-title fw-bold text-capitalize">${pokemon.name}</h5>
                        <p class="fw-bold mb-0">Tipos: </p>
                        <p class="mb-0 text-capitalize">${types}</p>
                        <p class="card-text fw-bold mt-1 mb-0">Ataques principales:</p>
                        ${moves}
                      </div>
                    </div>
                    `;
                listContainer.appendChild(col);
              } catch (error) {
              
            }
            })
        }
        obtenerListadoPokemon()
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js" integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO" crossorigin="anonymous"></script>
  </body>
</html>